<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Contact List</title>
    </head>
    <body onload ="fetchContact()">

    <div id="table">Contact loading---</div>
    <button id="refresh" type="button">Refresh</button>
    <button id="AddContact" type="button">Add Contact</button>

    <script src="config.js"></script>
    <script>
    
    document.getElementById("refresh").addEventListener('click', fetchContacts);
    document.getElementById("AddContact").addEventListener('click',addContact);
    
    function fetchContacts() {
        fetch(rootPath + "controller/get-contacts/")
        .then(function(response) {
            return response.json();

        })
        .then(function(data) {
            displayOutput(data);
         });
    }

        function displayOutput(data) {
           let output ="<table border='1' cellpadding='5 cellspacing='0'>";
             for(let a in data) {
                    output +=`
                    <tr onclick="editContact(${data[a].id})">
                        <td>
                            <img src="${rootPath}controller/uploads/${data[a].avatar}" width"40" height="40" style="object-fit:cover; border-radius:50%;"/>
                        </td>
                         <td><h5>${data[a].firstname}</h5></td>
                         <td><h5>${data[a].lastname}</h5></td>
                        </tr>
                        `;
                        
        } output += "</Table>";
          document.getElementById("table").innerHTML = output;
    }

    function addContact() {
        window.open("add-contact.html","_self");
    }
function editContact(id){
    window.open("edit-contact.html?=" + id,"_self");
}
</script>
    </body>
</html>